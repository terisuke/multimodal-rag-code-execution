# コードスタイルと規約

## Pythonコードスタイル
- **Pythonバージョン**: 互換性のために3.10+が必須
- **インポートスタイル**: 絶対インポートのフォールバックを持つ相対インポートのtry/exceptブロック
- **クラス命名**: クラスにはPascalCase（例：`Processor`、`PdfProcessor`）
- **メソッド命名**: メソッドと関数にはsnake_case
- **変数命名**: 変数にはsnake_case
- **定数**: 定数にはUPPER_SNAKE_CASE（例：`LOG_CONTAINER_NAME`）

## ファイル構成
- **コアロジック**: `/code`ディレクトリにメイン処理ロジックを含む
- **UIコンポーネント**: `/ui`ディレクトリにWebインターフェース用
- **ユーティリティ**: `/code/utils`にヘルパー関数とユーティリティ用
- **設定**: 処理プランのJSON、環境変数の.env

## 設定パターン
- **環境変数**: python-dotenvを使った.envファイルの広範囲な使用
- **処理プラン**: 文書処理パイプライン用のJSONベース設定
- **モジュラー設計**: プラグ可能な処理ステップを持つプロセッサークラス

## エラーハンドリング
- **ログ記録**: 一貫したログ記録のためのカスタム`logc()`関数
- **適切なフォールバック**: 合理的なデフォルト値を持つtry/exceptブロック
- **ファイルハンドリング**: スペースを削除するファイルの自動リネーム

## API設計
- **FastAPI**: リクエスト/レスポンス用のPydanticモデルを持つRESTfulエンドポイント
- **ストリーミング**: 検索操作でのストリーミングレスポンスのサポート
- **リクエストモデル**: APIリクエスト用の専用クラス（例：`SearchRequest`、`IngestionRequest`）

## ドキュメント化パターン
- **インラインコメント**: 最小限、何をではなくなぜに焦点
- **関数ドキュメント**: 処理ステップ関数にはパイプラインでの役割を説明する詳細なdocstringを含む
- **設定コメント**: サンプル設定ファイルでの広範囲なコメント

## テスト手法
- **pytest**: プライマリテストフレームワーク
- **VCR.py**: HTTPインタラクションの記録/再生用
- **Pre-commit**: コード品質チェック（設定されている場合）

## 開発プラクティス
- **環境の分離**: 依存関係管理のためのconda環境
- **マルチスレッド処理**: 並列文書処理のサポート
- **コンテナ化**: 適切な.dockerignoreファイルを持つDocker対応